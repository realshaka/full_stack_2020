(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(14),r=t.n(c),u=t(4),l=t(2),i=t(3),m=t.n(i),s="/api/persons",d=function(e){return m.a.get(s).then((function(e){return e.data}))},f=function(e){return m.a.post(s,e).then((function(e){return e.data}))},b=function(e){return console.log(s+"\x1d/".concat(e)),m.a.delete("".concat(s,"/").concat(e)).then((function(e){return console.log(e.data)}))},h=function(e){return m.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))},g=function(e){return o.a.createElement("button",{onClick:function(){console.log(e),!0===window.confirm("Delete ".concat(e.name,"?"))&&(b(e.id),window.location.reload())}},"delete")},v=function(e){var n=e.persons;return o.a.createElement("div",null,n.map((function(e){return o.a.createElement("div",{key:e.name},e.name," ",e.number," ",o.a.createElement(g,{name:e.name,id:e.id}))})))},p=function(e){return o.a.createElement("div",null,"filter show with ",o.a.createElement("input",{value:e.value,onChange:e.onChange}))},E=function(e){return o.a.createElement("form",{onSubmit:e.onSubmit},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:e.value[0],onChange:e.onChange[0]})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{value:e.value[1],onChange:e.onChange[1]})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},w=function(e){var n=e.message;return null===n?null:o.a.createElement("div",{className:"notifications"},n)},j=function(e){var n=e.message;return null===n?null:o.a.createElement("div",{className:"error"},n)},O=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),i=Object(l.a)(r,2),m=i[0],s=i[1],b=Object(a.useState)(""),g=Object(l.a)(b,2),O=g[0],C=g[1],S=Object(a.useState)(""),k=Object(l.a)(S,2),y=k[0],N=k[1],A=Object(a.useState)(null),D=Object(l.a)(A,2),I=D[0],J=D[1],L=Object(a.useState)(null),T=Object(l.a)(L,2),x=T[0],B=T[1],P=t.filter((function(e){return!0===e.name.toLowerCase().trim().includes(y.trim().toLowerCase())}));Object(a.useEffect)((function(){console.log("get data"),d().then((function(e){console.log("data loaded"),c(e)}))}),[]);var U=function(e){console.log(e),J(e),setTimeout((function(){J(null)}),5e3)},q=function(e){console.log(e),B(e),setTimeout((function(){B(null)}),5e3)};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(w,{message:I}),o.a.createElement(j,{message:x}),o.a.createElement(p,{value:y,onChange:function(e){N(e.target.value)}}),o.a.createElement("h2",null,"Add a new"),o.a.createElement(E,{onSubmit:function(e){var n=m.trim(),a=O.trim();e.preventDefault(),t.some((function(e){return e.name===n}))?function(e,n){var a="".concat(e," is already added to phonebook, replace the old number with a new one? "),o=window.confirm(a),r=t.find((function(n){return n.name===e}));r=Object(u.a)(Object(u.a)({},r),{},{number:n}),!0===o&&h(r).then((function(n){console.log("data updated"),console.log(n),c(t.map((function(e){return e.id!==r.id?e:n}))),U("Updated ".concat(e," phone number"))})).catch((function(n){console.log(n),q("Information of '".concat(e,"' was already deleted from server")),c(t.filter((function(e){return e.id!==r.id})))}))}(n,a):(f({name:n,number:a}).then((function(e){c(t.concat(e)),U("Added ".concat(n))})).catch((function(e){console.log(e.response.data),q(e.response.data.error)})),s(""),C(""),console.log(t))},value:[m,O],onChange:[function(e){s(e.target.value)},function(e){C(e.target.value)}]}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(v,{persons:P}))};t(37);r.a.render(o.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.894fd561.chunk.js.map